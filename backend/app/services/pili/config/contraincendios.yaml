# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”¥ CONFIGURACIÃ“N COMPLETA CONTRAINCENDIOS - SISTEMAS DE PROTECCIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

service: contraincendios
name: "Sistemas Contraincendios"
description: "Sistemas de detecciÃ³n y extinciÃ³n de incendios profesionales"
normativa_general: "NFPA 1, NFPA 13, NFPA 72, NFPA 20"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”¥ TIPOS DE SISTEMAS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
sistemas:
  DETECCION:
    nombre: "Sistema de DetecciÃ³n de Incendios"
    descripcion: "Detectores, central, sirenas y pulsadores"
    normativa: "NFPA 72"
    cobertura_detector_m2: 80
    precios:
      detector_humo_optico: 85.00
      detector_humo_ionico: 95.00
      detector_calor_termico: 95.00
      detector_llama: 180.00
      pulsador_manual: 65.00
      central_deteccion_4zonas: 1200.00
      central_deteccion_8zonas: 1800.00
      sirena_interior: 120.00
      sirena_exterior: 180.00
      luz_estrobo: 95.00
      cable_deteccion_2x18: 1.80
  
  EXTINCION:
    nombre: "Sistema de ExtinciÃ³n de Incendios"
    descripcion: "Extintores, gabinetes, rociadores y bombas"
    normativa: "NFPA 13, NFPA 10, NFPA 20"
    area_por_extintor_m2: 200
    precios:
      extintor_pqs_6kg: 85.00
      extintor_pqs_12kg: 120.00
      extintor_co2_6kg: 180.00
      extintor_agua_10lt: 95.00
      gabinete_manguera_30m: 450.00
      gabinete_manguera_45m: 550.00
      rociador_sprinkler: 35.00
      tuberia_sprinkler_1: 8.50
      bomba_contraincendios_10hp: 3500.00
      bomba_contraincendios_15hp: 4500.00
      tanque_reserva_5000lt: 2800.00
      valvula_check: 280.00
  
  COMPLETO:
    nombre: "Sistema Completo (DetecciÃ³n + ExtinciÃ³n)"
    descripcion: "Sistema integrado de protecciÃ³n"
    descuento_porcentaje: 10

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“ MENSAJES PROFESIONALES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
mensajes:
  presentacion: |
    Â¡Hola! ğŸ‘‹ Soy **Pili**, tu especialista en Sistemas Contraincendios de **Tesla Electricidad**.
    
    ğŸ¯ Te ayudo con:
    âœ… DetecciÃ³n y alarmas
    âœ… Rociadores automÃ¡ticos
    âœ… Extintores y seÃ±alizaciÃ³n
    âœ… Cumplimiento normativo NFPA
    
    **Selecciona el tipo de sistema:**
  
  confirm_sistema: |
    Perfecto, sistema **{tipo_sistema}**.
    
    ğŸ“‹ **Normativa:** {normativa}
    
    ğŸ“ **Â¿CuÃ¡l es el Ã¡rea total a proteger en mÂ²?**
    
    _Escribe el nÃºmero (ejemplo: 200)_
  
  ask_pisos: |
    âœ… Ãrea: **{area} mÂ²**
    
    ğŸ¢ **Â¿CuÃ¡ntos pisos tiene la edificaciÃ³n?**
    
    _Escribe el nÃºmero (ejemplo: 3)_
  
  ask_nivel_riesgo: |
    âœ… Pisos: **{pisos}**
    
    ğŸ”¥ **Â¿CuÃ¡l es el nivel de riesgo de la edificaciÃ³n?**
  
  cotizacion: |
    ğŸ“Š **COTIZACIÃ“N SISTEMA CONTRAINCENDIOS**
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ“‹ DATOS DEL PROYECTO:**
    
    ğŸ”¥ Sistema: {tipo_sistema}
    ğŸ“ Ãrea: {area} mÂ²
    ğŸ¢ Pisos: {pisos}
    âš ï¸ Nivel riesgo: {nivel_riesgo}
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ’° ITEMS CALCULADOS:**
    
    {items_detalle}
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ“ˆ TOTALES:**
    
    Subtotal: S/ {subtotal:.2f}
    IGV (18%): S/ {igv:.2f}
    **TOTAL: S/ {total:.2f}**
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    âœ… Incluye: Equipos + InstalaciÃ³n + CertificaciÃ³n
    â±ï¸ Tiempo: 15-20 dÃ­as hÃ¡biles
    ğŸ“‹ Normativa: {normativa}
    ğŸ GarantÃ­a: 1 aÃ±o
    
    Â¿Deseas generar el documento?

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”„ FLUJO DE CONVERSACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
documents:
  cotizacion-simple:
    etapas:
      - id: tipo_sistema
        type: buttons
        message_template: presentacion
        next: area
        progress: "1/5"
        opciones:
          - text: "ğŸ”¥ DetecciÃ³n"
            value: "DETECCION"
          - text: "ğŸ’§ ExtinciÃ³n"
            value: "EXTINCION"
          - text: "ğŸ§¯ Sistema Completo"
            value: "COMPLETO"
      
      - id: area
        type: input_number
        message_template: confirm_sistema
        next: pisos
        progress: "2/5"
        validacion:
          min: 10
          max: 10000
          type: float
      
      - id: pisos
        type: input_number
        message_template: ask_pisos
        next: nivel_riesgo
        progress: "3/5"
        validacion:
          min: 1
          max: 50
          type: int
      
      - id: nivel_riesgo
        type: buttons
        message_template: ask_nivel_riesgo
        next: quotation
        progress: "4/5"
        opciones:
          - text: "ğŸŸ¢ Bajo"
            value: "BAJO"
          - text: "ğŸŸ¡ Medio"
            value: "MEDIO"
          - text: "ğŸŸ  Alto"
            value: "ALTO"
      
      - id: quotation
        type: generate_quote
        message_template: cotizacion
        calculator: calculate_contraincendios_quote
        progress: "5/5"
        actions:
          - text: "ğŸ“„ Generar CotizaciÃ³n"
            value: "GENERAR"
          - text: "ğŸ”„ Nueva consulta"
            value: "RESTART"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Š REGLAS DE CÃLCULO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
reglas_calculo:
  # Detectores segÃºn Ã¡rea
  detectores_formula: "ceil(area / 80)"
  
  # Extintores segÃºn Ã¡rea
  extintores_formula: "ceil(area / 200)"
  
  # Pulsadores (1 por piso)
  pulsadores_formula: "pisos"
  
  # Sirenas (1 cada 2 pisos)
  sirenas_formula: "ceil(pisos / 2)"
  
  # Cable (metros)
  cable_formula: "area * 0.5 * pisos"
