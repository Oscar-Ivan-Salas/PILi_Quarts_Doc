# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”Œ CONFIGURACIÃ“N COMPLETA POZO A TIERRA - SISTEMAS DE PROTECCIÃ“N ELÃ‰CTRICA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

service: pozo-tierra
name: "Sistema de Puesta a Tierra"
description: "Sistemas de puesta a tierra y protecciÃ³n elÃ©ctrica profesional"
normativa: "CNE Suministro 2011 - SecciÃ³n 250 + IEEE Std 142"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒ TIPOS DE SUELO Y CARACTERÃSTICAS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
tipos_suelo:
  ARCILLOSO:
    nombre: "Suelo Arcilloso"
    resistividad: 50
    factor_correccion: 1.0
    descripcion: "Suelo hÃºmedo, buena conductividad"
    icon: "ğŸŸ¤"
  
  ARENOSO:
    nombre: "Suelo Arenoso"
    resistividad: 200
    factor_correccion: 1.5
    descripcion: "Suelo seco, conductividad media"
    icon: "ğŸŸ¡"
  
  ROCOSO:
    nombre: "Suelo Rocoso"
    resistividad: 1000
    factor_correccion: 2.0
    descripcion: "Suelo muy seco, baja conductividad"
    icon: "âš«"
  
  MIXTO:
    nombre: "Suelo Mixto"
    resistividad: 300
    factor_correccion: 1.3
    descripcion: "CombinaciÃ³n de tipos de suelo"
    icon: "ğŸ”µ"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ’° PRECIOS DE MATERIALES Y SERVICIOS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
precios:
  pozo_completo_basico: 1760.00
  pozo_completo_profesional: 2200.00
  varilla_copperweld_2_4m: 85.00
  varilla_copperweld_3m: 110.00
  cable_desnudo_cu_25mm: 12.00
  cable_desnudo_cu_35mm: 16.00
  bentonita_saco_25kg: 45.00
  thor_gel_saco: 120.00
  sal_industrial_saco: 15.00
  carbon_vegetal_saco: 25.00
  conector_cadweld: 35.00
  caja_registro: 180.00
  medicion_telurometro: 250.00

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Š RESISTENCIA OBJETIVO POR TIPO DE INSTALACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
resistencia_objetivo:
  residencial: 25
  comercial: 10
  industrial: 5

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“ MENSAJES PROFESIONALES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
mensajes:
  presentacion: |
    Â¡Hola! ğŸ‘‹ Soy **Pili**, tu especialista en Sistemas de Puesta a Tierra de **Tesla Electricidad**.
    
    ğŸ¯ Te ayudo con:
    âœ… Pozos a tierra profesionales
    âœ… MediciÃ³n de resistencia
    âœ… Cumplimiento del CNE
    âœ… GarantÃ­a de 2 aÃ±os
    
    **Selecciona el tipo de suelo:**
  
  confirm_suelo: |
    Perfecto, suelo **{tipo_suelo}**.
    
    ğŸ“Š Resistividad: {resistividad} Î©Â·m
    ğŸ”§ Factor de correcciÃ³n: {factor_correccion}
    
    âš¡ **Â¿QuÃ© tipo de instalaciÃ³n es?**
  
  ask_resistencia: |
    Entendido, instalaciÃ³n **{tipo_instalacion}**.
    
    ğŸ“ Resistencia objetivo recomendada: **{resistencia_objetivo} Î©**
    
    Â¿Deseas usar este valor o ingresar uno personalizado?
    
    _Escribe el nÃºmero en Ohms (ejemplo: 10) o presiona el botÃ³n recomendado_
  
  cotizacion: |
    ğŸ“Š **COTIZACIÃ“N SISTEMA DE PUESTA A TIERRA**
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ“‹ DATOS DEL PROYECTO:**
    
    ğŸŒ Tipo de suelo: {tipo_suelo}
    âš¡ Tipo instalaciÃ³n: {tipo_instalacion}
    ğŸ“ Resistencia objetivo: {resistencia_objetivo} Î©
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ’° ITEMS CALCULADOS:**
    
    {items_detalle}
    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    **ğŸ“ˆ TOTALES:**
    
    Subtotal: S/ {subtotal:.2f}
    IGV (18%): S/ {igv:.2f}
    **TOTAL: S/ {total:.2f}**
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    
    âœ… Incluye: Materiales + InstalaciÃ³n + MediciÃ³n
    â±ï¸ Tiempo: 2-3 dÃ­as hÃ¡biles
    ğŸ“‹ Normativa: CNE 2011 SecciÃ³n 250
    ğŸ GarantÃ­a: 2 aÃ±os
    
    Â¿Deseas generar el documento?

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”„ FLUJO DE CONVERSACIÃ“N
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
documents:
  cotizacion-simple:
    etapas:
      - id: tipo_suelo
        type: buttons
        message_template: presentacion
        data_source: kb.tipos_suelo
        next: tipo_instalacion
        progress: "1/4"
      
      - id: tipo_instalacion
        type: buttons
        message_template: confirm_suelo
        next: resistencia
        progress: "2/4"
        opciones:
          - text: "ğŸ  Residencial"
            value: "RESIDENCIAL"
          - text: "ğŸ¢ Comercial"
            value: "COMERCIAL"
          - text: "ğŸ­ Industrial"
            value: "INDUSTRIAL"
      
      - id: resistencia
        type: input_number_or_button
        message_template: ask_resistencia
        next: quotation
        progress: "3/4"
        validacion:
          min: 1
          max: 100
          type: float
        opciones_dinamicas: true
      
      - id: quotation
        type: generate_quote
        message_template: cotizacion
        calculator: calculate_pozo_tierra_quote
        progress: "4/4"
        actions:
          - text: "ğŸ“„ Generar CotizaciÃ³n"
            value: "GENERAR"
          - text: "ğŸ”„ Nueva consulta"
            value: "RESTART"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Š REGLAS DE CÃLCULO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
reglas_calculo:
  # NÃºmero de varillas segÃºn resistencia objetivo y tipo de suelo
  varillas_formula: |
    if resistencia_objetivo <= 5:
      varillas = 4 * factor_correccion
    elif resistencia_objetivo <= 10:
      varillas = 3 * factor_correccion
    elif resistencia_objetivo <= 25:
      varillas = 2 * factor_correccion
    else:
      varillas = 1 * factor_correccion
  
  # Cable necesario (metros)
  cable_formula: "varillas * 3 + 10"
  
  # Mejoradores de suelo
  bentonita_sacos: "varillas * 2"
  thor_gel_sacos: "varillas if resistencia_objetivo <= 10 else 0"
  
  items_automaticos:
    - descripcion: "Varillas Copperweld 2.4m ({varillas} und)"
      cantidad: "{varillas}"
      precio: "{precios.varilla_copperweld_2_4m}"
    
    - descripcion: "Cable desnudo Cu 25mmÂ² ({cable_metros}m)"
      cantidad: "{cable_metros}"
      precio: "{precios.cable_desnudo_cu_25mm}"
    
    - descripcion: "Bentonita sÃ³dica ({bentonita_sacos} sacos)"
      cantidad: "{bentonita_sacos}"
      precio: "{precios.bentonita_saco_25kg}"
    
    - descripcion: "Conectores Cadweld ({varillas} und)"
      cantidad: "{varillas}"
      precio: "{precios.conector_cadweld}"
    
    - descripcion: "Caja de registro (1 und)"
      cantidad: 1
      precio: "{precios.caja_registro}"
    
    - descripcion: "MediciÃ³n con telurÃ³metro (1 serv)"
      cantidad: 1
      precio: "{precios.medicion_telurometro}"
